<form>
    <mat-chip-grid #chipGrid aria-label="Hashtag selection">
        <mat-chip-row
            *ngFor="let hashtag of addedHashtags"
            (removed)="remove(hashtag)"
            [editable]="true"
            (edited)="edit(hashtag, $event)">
            {{ hashtag }}
            <button matChipRemove [attr.aria-label]="'remove ' + hashtag">
                <mat-icon>close</mat-icon>
            </button>
        </mat-chip-row></mat-chip-grid
    >
    <mat-form-field appearance="outline"
        ><mat-label>Hashtags</mat-label>
        <input
            matInput
            type="text"
            placeholder="Nowy hashtag"
            #hashtagInput
            [formControl]="hashtagCtrl"
            [matChipInputFor]="chipGrid"
            [matAutocomplete]="auto"
            [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
            (matChipInputTokenEnd)="addHashtag($event)" />
        <mat-error
            class="text-body-small"
            *ngIf="hashtagCtrl.errors && hashtagCtrl.errors['maxlength']">
            <mat-icon>info</mat-icon> Maksymalna liczba znak√≥w to
            {{ hashtagCtrl.errors['maxlength']['requiredLength'] }}</mat-error
        >
    </mat-form-field>
    <mat-autocomplete
        #auto="matAutocomplete"
        (optionSelected)="selected($event)">
        <ng-container
            *ngIf="
                hashtagCtrl.value &&
                hashtagCtrl.value.length > 1 &&
                (filteredHashtags$ | async) as filteredHashtags
            ">
            <mat-option
                *ngFor="
                    let hashtag of filteredHashtags
                        | slice : 0 : maxAutocompleteOptions
                "
                [value]="hashtag"
                [innerHTML]="hashtag | highlight : hashtagCtrl.value"
                >{{ hashtag }}
            </mat-option></ng-container
        >
    </mat-autocomplete>
</form>
